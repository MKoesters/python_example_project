language: python
python:
      - "3.6"
sudo: false

env:
  global:
    - TWINE_USERNAME=MKoesters
    # Note: TWINE_PASSWORD is set in Travis settings

script:
  - tox
  - pip3 install cibuildwheel
  - cibuildwheel --output-dir wheelhouse
  - |
    if [[ $TRAVIS_TAG ]]; then
      python -m pip install twine
      python -m twine upload --repository-url https://test.pypi.org/legacy/ wheelhouse/*.whl
    fi
